(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.Vue3Geetest={},t.Vue))})(this,function(t,e){"use strict";const d=["id"],a=e.defineComponent({__name:"GeetestCaptcha",props:{config:{}},emits:["initialized"],setup(s,{emit:c}){const u=e.inject("geetest-config"),f=s,g=c,l=e.ref(`captcha-${Date.now()}`),n=e.ref(!1),p={...u,...f.config},m=()=>{if(document.getElementById("geetest")){n.value=!0;return}const i=document.createElement("script");i.id="geetest",i.src="https://static.geetest.com/v4/gt4.js",i.onload=()=>{n.value=!0},i.onerror=()=>{console.error("Failed to load Geetest")},document.head.appendChild(i)},h=()=>{console.log(`Initializing Geetest: ${l.value}`),console.log(`gt4Loaded: ${n.value}`),window.initGeetest4&&n.value?window.initGeetest4(p,o=>{console.log(`Captcha initialized: ${l.value}`),o.appendTo(`#${l.value}`),g("initialized",o)}):console.error("Geetest not loaded or initGeetest4 is not available")};return e.onMounted(()=>{m(),console.log("GeetestCaptcha mounted"),console.log(`gt4Loaded: ${n.value}`),e.watch(n,o=>{console.log(`gt4Loaded changed: ${o}`),o&&e.nextTick(()=>{h()})})}),(o,i)=>(e.openBlock(),e.createElementBlock("div",{id:l.value},null,8,d))}}),r={install(s,c){s.component("GeetestCaptcha",a),c&&s.provide("geetest-config",c)}};t.GeetestCaptcha=a,t.default=r,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
