(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.Vue3Geetest={},t.Vue))})(this,function(t,e){"use strict";const d=["id"],a=e.defineComponent({__name:"GeetestCaptcha",props:{config:{}},emits:["initialized"],setup(s,{emit:c}){const u=e.inject("geetest-config"),f=s,p=c,l=e.ref(`captcha-${Date.now()}`),i=e.ref(!1),g={...u,...f.config},m=()=>{if(document.getElementById("geetest")){i.value=!0;return}const o=document.createElement("script");o.id="geetest",o.src="https://static.geetest.com/v4/gt4.js",o.onload=()=>{i.value=!0},o.onerror=()=>{console.error("Failed to load Geetest")},document.head.appendChild(o)},h=()=>{console.log(`Initializing Geetest: ${l.value}`),console.log(`gt4Loaded: ${i.value}`),window.initGeetest4&&i.value?window.initGeetest4(g,n=>{console.log(`Captcha initialized: ${l.value}`),n.appendTo(`#${l.value}`),p("initialized",n)}):console.error("Geetest not loaded or initGeetest4 is not available")};return e.onMounted(()=>{m(),e.watch(i,n=>{n&&e.nextTick(()=>{h()})})}),(n,o)=>(e.openBlock(),e.createElementBlock("div",{id:l.value},null,8,d))}}),r={install(s,c){s.component("GeetestCaptcha",a),c&&s.provide("geetest-config",c)}};t.GeetestCaptcha=a,t.default=r,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
