(function(n,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.Vue3Geetest={},n.Vue))})(this,function(n,e){"use strict";const r=["id"],a=e.defineComponent({__name:"GeetestCaptcha",props:{config:{}},emits:["initialized"],setup(s,{emit:c}){const p=e.inject("geetest-config"),u=s,m=c,l=e.ref(`captcha-${Date.now()}`),d=e.ref(!1);let o;const g={...p,...u.config},h=()=>{const t=document.getElementById("geetest");t&&t.remove();const i=document.createElement("script");i.id="geetest",i.src="https://static.geetest.com/v4/gt4.js",i.onload=()=>{d.value=!0},i.onerror=()=>{console.error("Failed to load Geetest")},document.head.appendChild(i)},G=()=>{window.initGeetest4&&d.value?window.initGeetest4(g,t=>{o=t,o.appendTo(`#${l.value}`),m("initialized",o)}):console.error("Geetest not loaded or initGeetest4 is not available")};return e.onMounted(()=>{h(),e.watch(d,t=>{t&&e.nextTick(()=>{G()})})}),e.onUnmounted(()=>{const t=document.getElementById("geetest");t&&t.remove(),o==null||o.destroy()}),(t,i)=>(e.openBlock(),e.createElementBlock("div",{id:l.value},null,8,r))}}),f={install(s,c){s.component("GeetestCaptcha",a),c&&s.provide("geetest-config",c)}};n.GeetestCaptcha=a,n.default=f,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
