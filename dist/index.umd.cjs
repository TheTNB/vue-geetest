(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.Vue3Geetest={},t.Vue))})(this,function(t,e){"use strict";const l=["id"],d=e.defineComponent({__name:"GeetestCaptcha",props:{config:{}},emits:["initialized"],setup(i,{emit:s}){const f=e.inject("geetest-config"),u=i,p=s,a=e.ref(`captcha-${Date.now()}`),c=e.ref(!1),m={...f,...u.config},g=()=>{if(document.getElementById("geetest")){c.value=!0;return}const o=document.createElement("script");o.id="geetest",o.src="https://static.geetest.com/v4/gt4.js",o.onload=()=>{c.value=!0},o.onerror=()=>{console.error("Failed to load Geetest")},document.head.appendChild(o)},h=()=>{window.initGeetest4&&c.value?window.initGeetest4(m,n=>{n.appendTo(`#${a.value}`),p("initialized",n)}):console.error("Geetest not loaded or initGeetest4 is not available")};return e.onMounted(()=>{g(),e.watch(c,n=>{n&&e.nextTick(()=>{h()})})}),(n,o)=>(e.openBlock(),e.createElementBlock("div",{id:a.value},null,8,l))}}),r={install(i,s){i.component("GeetestCaptcha",d),s&&i.provide("geetest-config",s)}};t.GeetestCaptcha=d,t.default=r,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
